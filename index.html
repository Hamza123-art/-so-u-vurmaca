<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>XP Vurmaca - Bab-ayak Edition</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Tahoma', sans-serif; cursor: none; }
        canvas { display: block; }
        #skorPaneli {
            position: absolute; top: 15px; left: 15px; 
            color: white; font-size: 28px; font-weight: bold;
            text-shadow: 2px 2px #000; pointer-events: none;
            background: rgba(0, 100, 0, 0.5); padding: 10px; border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="skorPaneli">Skor: <span id="skor">0</span></div>
    <canvas id="oyunAlani"></canvas>

    <audio id="babayakSes" loop>
        <source src="bab-ayak.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById("oyunAlani");
        const ctx = canvas.getContext("2d");
        const skorYazi = document.getElementById("skor");
        const ses = document.getElementById("babayakSes");

        let skor = 0;
        let oyunAktif = false;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const arkaplan = new Image(); arkaplan.src = 'arkaplan.jpg';
        const hedef = new Image(); hedef.src = 'hedef.png';

        let hedefObj = { x: 300, y: 300, w: 140, h: 140 };
        let mouse = { x: 0, y: 0 };

        window.addEventListener("mousemove", (e) => { mouse.x = e.clientX; mouse.y = e.clientY; });

        window.addEventListener("mousedown", () => {
            // İlk tıklamada müziği başlat
            if(!oyunAktif) {
                ses.play();
                oyunAktif = true;
            }

            // Vurma kontrolü
            if(mouse.x > hedefObj.x && mouse.x < hedefObj.x + hedefObj.w &&
               mouse.y > hedefObj.y && mouse.y < hedefObj.y + hedefObj.h) {
                skor += 100;
                skorYazi.innerText = skor;
                // Yeni rastgele konum
                hedefObj.x = Math.random() * (canvas.width - hedefObj.w);
                hedefObj.y = Math.random() * (canvas.height - hedefObj.h);
            }
        });

        function render() {
            ctx.drawImage(arkaplan, 0, 0, canvas.width, canvas.height);
            ctx.drawImage(hedef, hedefObj.x, hedefObj.y, hedefObj.w, hedefObj.h);
            
            // XP Tarzı Nişangah
            ctx.strokeStyle = "rgba(255, 0, 0, 0.8)";
            ctx.lineWidth = 4;
            ctx.beginPath(); ctx.arc(mouse.x, mouse.y, 20, 0, Math.PI*2); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(mouse.x - 30, mouse.y); ctx.lineTo(mouse.x + 30, mouse.y); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(mouse.x, mouse.y - 30); ctx.lineTo(mouse.x, mouse.y + 30); ctx.stroke();
            
            requestAnimationFrame(render);
        }

        arkaplan.onload = render;
    </script>
</body>
</html>
